{% extends 'base.html' %}

{% block content %}
<div class="container" style="margin-top:20px;">
    {% regroup articles  by pub_date.year as year_list %}
    <ul>
        {% for year in year_list %}
            <li>
                <a class="badge badge-success" data-toggle="collapse" href="#archive-{{year.grouper}}" role="button" aria-expanded="false" aria-controls="archive-{{year.grouper}}">{{ year.grouper}}年</a>
            </li>
            <div class="collapse show" id="archive-{{year.grouper}}">
                <ul>
                    {%regroup year.list by pub_date.month as month_list %}
                    <li>
                        {% for month in month_list %}
                        <h6><a class="badge badge-secondary" data-toggle="collapse" href="#archive-{{month.grouper}}" role="button" aria-expanded="false" aria-controls="archive-{{month.grouper}}">{{ month.grouper}}月 ({{month.list|length}})</a></h6>
                            <div class="collapse show" id="archive-{{month.grouper}}">
                                <ul>
                                    {% for article in month.list %}
                                    <li><a class="badge badge-light" href="{% url 'detail' slug=article.id %}">{{article.title}}</a><i class="ml-1">{{article.pub_date|date:"n月d号"}}</i></li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endfor %}
                    </li>
                </ul>
            </div>
        {% endfor %}
    </ul>
</div>
{% endblock %}